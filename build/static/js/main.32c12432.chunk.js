(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(3),c=n(1),l=n.n(c),u=(n(15),n(4)),i=n.n(u),s=n(5),p=n.n(s);var d=e=>{let{onAddNote:t}=e;const[n,a]=Object(o.useState)(""),[c,l]=Object(o.useState)("");return r.a.createElement("form",{onSubmit:e=>{e.preventDefault(),n&&c&&(t({text:n,user:c}),a(""),l(""))}},r.a.createElement("input",{type:"text",placeholder:"Enter your name",value:c,onChange:e=>l(e.target.value)}),r.a.createElement("textarea",{placeholder:"Write your note here",value:n,onChange:e=>a(e.target.value)}),r.a.createElement("button",{type:"submit"},"Add Note"))};var m=e=>{let{currentLocation:t}=e;const n=Object(o.useRef)(null),[a,c]=Object(o.useState)([]),[u,s]=Object(o.useState)(!1),[m,h]=Object(o.useState)(null),g=()=>{fetch("http://54.66.98.246/api/note").then(e=>e.json()).then(e=>{c(e),n.current&&e.forEach(e=>{const t=l.a.icon({iconUrl:i.a,iconSize:[50,50],iconAnchor:[25,50],popupAnchor:[0,-50]});l.a.marker([e.latitude,e.longitude],{icon:t,title:e.user}).addTo(n.current).bindPopup("<strong>".concat(e.user,"</strong>: ").concat(e.text))})}).catch(e=>console.error("Error fetching notes:",e))};Object(o.useEffect)(()=>{n.current=l.a.map("map",{center:[t.lat,t.lng],zoom:13}),l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(n.current);const e=l.a.icon({iconUrl:p.a,iconSize:[50,50],iconAnchor:[25,50],popupAnchor:[0,-50]});return l.a.marker([t.lat,t.lng],{icon:e,title:"Your Location"}).addTo(n.current).bindPopup("You are here").openPopup(),g(),n.current.on("click",function(e){h(e.latlng),s(!0)}),()=>{n.current.off("click"),n.current.remove()}},[t]);return r.a.createElement("div",null,r.a.createElement("div",{id:"map",style:{height:"400px",width:"100%"}}),r.a.createElement("button",{onClick:()=>{n.current&&n.current.setView(new l.a.LatLng(t.lat,t.lng),n.current.getZoom())}},"My Location"),r.a.createElement("button",{onClick:()=>{s(!u)}},u?"Hide Form":"Add Note"),u&&r.a.createElement(d,{onAddNote:e=>{const t={...e,latitude:m.lat,longitude:m.lng};fetch("http://54.66.98.246/api/note",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(e.ok)return e.json();throw console.log(e),new Error("Network response was not ok.")}).then(e=>{c([...a,e]),s(!1),h(null),g()}).catch(e=>console.error("Error posting note:",e))},position:m}))};var h=e=>{let{notes:t}=e;return r.a.createElement("ul",null,t.map(e=>e.location&&r.a.createElement("li",{key:e.id},r.a.createElement("strong",null,e.user),": ",e.text," (Located at"," ",e.location.lat,", ",e.location.lng,")")))};var g=function(){const[e,t]=Object(o.useState)({lat:0,lng:0}),[n]=Object(o.useState)([]);return Object(o.useEffect)(()=>{navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lng:e.coords.longitude})},()=>{alert("Could not fetch your location!")})},[]),r.a.createElement("div",null,r.a.createElement("header",{className:"app-header"},r.a.createElement("h1",null,"My Community Landmark"),r.a.createElement("p",null,"Share and discover notes about places in your community!")),r.a.createElement(m,{currentLocation:e,notes:n}),r.a.createElement(h,{notes:n}))};n(16);const E=document.getElementById("root");Object(a.createRoot)(E).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)))},4:function(e,t,n){e.exports=n.p+"static/media/location.4b15d219.png"},5:function(e,t,n){e.exports=n.p+"static/media/mylocation.8577c64d.png"},6:function(e,t,n){e.exports=n(17)}},[[6,1,2]]]);
//# sourceMappingURL=main.32c12432.chunk.js.map